(function(t){function e(e){for(var s,a,i=e[0],d=e[1],c=e[2],l=0,h=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&h.push(n[a][0]),n[a]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(t[s]=d[s]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],s=!0,i=1;i<o.length;i++){var d=o[i];0!==n[d]&&(s=!1)}s&&(r.splice(e--,1),t=a(a.s=o[0]))}return t}var s={},n={app:0},r=[];function a(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=s,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(o,s,function(e){return t[e]}.bind(null,s));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=d;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"255d":function(t,e,o){"use strict";o("932e")},2915:function(t,e,o){"use strict";o("5a72")},"309a":function(t,e,o){t.exports=o.p+"img/logout.4538768f.svg"},"32ce":function(t,e,o){"use strict";o("3b72")},"37c5":function(t,e,o){"use strict";o("c3f6")},"3b72":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);var s=o("2b0e"),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Sidebar",{staticClass:"sidebar"}),e("router-view",{staticClass:"view-body"})],1)},r=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar"},[e("avatar"),e("div",{staticClass:"icons"},[e("router-link",{attrs:{to:"/note",title:"笔记"}},[e("img",{staticClass:"iconfont icon-note",attrs:{alt:"",src:o("f027")}})]),e("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[e("img",{staticClass:"iconfont icon-notebook",attrs:{alt:"",src:o("6e4d")}})]),e("router-link",{attrs:{to:"/trash",title:"回收站"}},[e("img",{staticClass:"iconfont icon-trash",attrs:{alt:"",src:o("c637")}})])],1),e("div",{staticClass:"logout"},[e("img",{staticClass:"iconfont icon-logout",attrs:{alt:"",src:o("309a")},on:{click:t.onLogout}})])],1)},i=[],d=function(){var t=this,e=t._self._c;return e("span",{attrs:{title:t.username}},[t._v(t._s(t.slug))])},c=[],u=o("2f62"),l={name:"Avatar",created(){},methods:{...Object(u["b"])({setUser:"checkLogin"})},computed:{...Object(u["c"])(["username","slug"])}},h=l,p=(o("255d"),o("0c7c")),m=Object(p["a"])(h,d,c,!1,null,"f577c88c",null),g=m.exports,v={name:"Sidebar",components:{Avatar:g},methods:{...Object(u["b"])(["logout"]),onLogout(){this.logout({path:"/login"})}}},b=v,f=(o("2915"),Object(p["a"])(b,a,i,!1,null,"528520f6",null)),N=f.exports,k={name:"App",components:{Sidebar:N}},w=k,T=(o("9134"),Object(p["a"])(w,n,r,!1,null,null,null)),I=T.exports,_=o("8c4f"),C=o("bc3a"),y=o.n(C),E=o("5c96"),A=o.n(E);function x(t,e="GET",o={}){return new Promise((s,n)=>{let r={url:t,method:e,validateStatus(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?r.params=o:r.data=o,y()(r).then(t=>{200===t.status?s(t.data):(E["Message"].error(t.data.msg),n(t.data))}).catch(()=>{E["Message"].error("网络异常"),n({msg:"网络异常"})})})}function O(t){let e="object"===typeof t?t:new Date(t),o=e.getTime(),s=Date.now(),n=s-o,r="";switch(!0){case n<6e4:r="刚刚";break;case n<36e5:r=Math.floor(n/6e4)+"分钟前";break;case n<864e5:r=Math.floor(n/36e5)+"小时前";break;default:r=Math.floor(n/864e5)+"天前"}return r}y.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",y.a.defaults.baseURL="https://note-server.hunger-valley.com/",y.a.defaults.withCredentials=!0;const L={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"};var P={getAll(){return new Promise((t,e)=>{x(L.GET).then(e=>{e.data=e.data.sort((t,e)=>t.createdAt<e.createdAt?1:-1),e.data.forEach(t=>{t.createdAtFriendly=O(t.createdAt),t.updatedAtFriendly=O(t.updatedAt)}),t(e)}).catch(t=>{e(t)})})},updateNotebook(t,{title:e=""}={title:""}){return x(L.UPDATE.replace(":id",t),"PATCH",{title:e})},deleteNotebook(t){return x(L.DELETE.replace(":id",t),"DELETE")},addNotebook({title:t=""}={title:""}){return new Promise((e,o)=>{x(L.ADD,"POST",{title:t}).then(t=>{t.data.createdAtFriendly=O(t.data.createdAt),t.data.updatedAtFriendly=O(t.data.updatedAt),e(t)}).catch(t=>{o(t)})})}};s["default"].use(u["a"]);const S={notebooks:null,curBookId:null},D={notebooks:t=>t.notebooks||[],curBook:t=>Array.isArray(t.notebooks)?t.curBookId?t.notebooks.find(e=>e.id===parseInt(t.curBookId)):t.notebooks[0]||{}:{}},j={setNotebooks(t,e){t.notebooks=e.notebooks},addNotebook(t,e){t.notebooks.unshift(e.notebook)},updateNotebook(t,e){let o=t.notebooks.find(t=>t.id.toString()===e.notebookId)||{};o.title=e.title},deleteNotebook(t,e){t.notebooks=t.notebooks.filter(t=>t.id.toString()!==e.notebookId)},setCurBook(t,e){t.curBookId=e.curBookId}},$={getNotebooks({commit:t,state:e}){return null!==e.notebooks?Promise.resolve():P.getAll().then(e=>{t("setNotebooks",{notebooks:e.data})})},addNotebook({commit:t},e){return P.addNotebook({title:e.title}).then(e=>{t("addNotebook",{notebook:e.data}),E["Message"].success(e.msg)})},updateNotebook({commit:t},e){return P.updateNotebooks(e.notebookId,{title:e.title}).then(o=>{t("updateNotebook",{notebookId:e.notebookId,title:e.title}),E["Message"].success(o.msg)})},deleteNotebook({commit:t},e){return P.deleteNotebook(e.notebookId).then(o=>{t("deleteNotebook",{notebookId:e.notebookId}),E["Message"].success(o.msg)})}};var B={state:S,getters:D,mutations:j,actions:$};const M={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"};var R={getAllNotes({notebookId:t}){return new Promise((e,o)=>{x(M.GET.replace(":notebookId",t)).then(t=>{t.data=t.data.map(t=>(t.createdAtFriendly=O(t.createdAt),t.updatedAtFriendly=O(t.updatedAt),t)).sort((t,e)=>t.updatedAt<e.updatedAt),e(t)}).catch(t=>{o(t)})})},updateNote({noteId:t},{title:e,content:o}){return x(M.UPDATE.replace(":noteId",t),"PATCH",{title:e,content:o})},deleteNote({noteId:t}){return x(M.DELETE.replace(":noteId",t),"DELETE")},addNote({notebookId:t},{title:e="",content:o=""}={title:"",content:""}){return new Promise((s,n)=>{x(M.ADD.replace(":notebookId",t),"POST",{title:e,content:o}).then(t=>{t.data.createdAtFriendly=O(t.data.createdAt),t.data.updatedAtFriendly=O(t.data.updatedAt),s(t)}).catch(t=>{n(t)})})}};s["default"].use(u["a"]);const U={notes:null,curNoteId:null},F={notes:t=>t.notes,curNote:t=>Array.isArray(t.notes)?t.curNoteId?t.notes.find(e=>e.id.toString()===t.curNoteId)||{title:"",content:""}:t.notes[0]||{title:"",content:""}:{title:"",content:""}},G={setCurNote(t,e={}){t.curNoteId=e.curNoteId},setNotes(t,e){t.notes=e.notes},addNote(t,e){t.notes.unshift(e.note)},updateNote(t,e){let o=t.notes.find(t=>t.id===e.noteId)||{};o.title=e.title,o.content=e.content},deleteNote(t,e){t.notes=t.notes.filter(t=>t.id!==e.noteId)}},q={getNotes({commit:t},{notebookId:e}){return R.getAllNotes({notebookId:e}).then(e=>{t("setNotes",{notes:e.data})})},addNote({commit:t},{notebookId:e,title:o,content:s}){return R.addNote({notebookId:e},{title:o,content:s}).then(e=>{t("addNote",{note:e.data}),E["Message"].success(e.msg)})},updateNote({commit:t},{noteId:e,title:o,content:s}){return R.updateNote({noteId:e},{title:o,content:s}).then(()=>{t("updateNote",{noteId:e,title:o,content:s})})},deleteNote({commit:t},{noteId:e}){return R.deleteNote({noteId:e}).then(o=>{t("deleteNote",{noteId:e}),E["Message"].success(o.msg)})}};var H={state:U,getters:F,mutations:G,actions:q};const V={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"};var J={getAllTrashNotes(){return new Promise((t,e)=>{x(V.GET).then(e=>{e.data=e.data.sort((t,e)=>t.createdAt<e.createdAt?1:-1),e.data.forEach(t=>{t.createdAtFriendly=O(t.createdAt),t.updatedAtFriendly=O(t.updatedAt)}),t(e)}).catch(t=>{e(t)})})},deleteTrashNote({noteId:t}){return x(V.DELETE.replace(":noteId",t),"DELETE")},revertTrashNote({noteId:t}){return x(V.REVERT.replace(":noteId",t),"PATCH")}};s["default"].use(u["a"]);const z={trashNotes:null,curTrashNoteId:null},K={trashNotes:t=>t.trashNotes||[],curTrashNote:(t,e)=>t.curTrashNoteId?t.trashNotes.find(e=>e.id===parseInt(t.curTrashNoteId))||{}:e.trashNotes[0]||{},belongTo:(t,e,o,s)=>{let n=s.notebooks.find(t=>t.id===e.curTrashNote.notebookId)||{};return n.title||""}},Q={setTrashNotes(t,e){t.trashNotes=e.trashNotes},setCurTrashNote(t,e={}){t.curTrashNoteId=e.curTrashNoteId},addTrashNote(t,e){this.setTrashNotes.unshift(e.note)},deleteTrashNote(t,e){t.trashNotes=t.trashNotes.filter(t=>t.id!==e.noteId)}},W={getAllTrashNotes({commit:t}){return J.getAllTrashNotes().then(e=>{t("setTrashNotes",{trashNotes:e.data})})},removeTrashNote({commit:t},{noteId:e}){return J.deleteTrashNote({noteId:e}).then(o=>{t("deleteTrashNote",{noteId:e}),E["Message"].success(o.msg)})},revertTrashNote({commit:t},{noteId:e}){return J.revertTrashNote({noteId:e}).then(o=>{t("deleteTrashNote",{noteId:e}),E["Message"].success(o.msg)})}};var X={state:z,getters:K,mutations:Q,actions:W};const Y={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};var Z={register({username:t,password:e}){return x(Y.REGISTER,"POST",{username:t,password:e})},login({username:t,password:e}){return x(Y.LOGIN,"POST",{username:t,password:e})},logout(){return x(Y.LOGOUT)},getInfo(){return x(Y.GET_INFO)}},tt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"login"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"main"}),e("div",{staticClass:"form"},[e("h3",{on:{click:t.showRegister}},[t._v("创建账户")]),e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"register",class:{show:t.isShowRegister}},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.register.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onRegister.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}})]),e("p",{class:{error:t.register.isError}},[t._v(" "+t._s(t.register.notice))]),e("div",{staticClass:"button",on:{click:t.onRegister}},[t._v("创建账号")])])]),e("h3",{on:{click:t.showLogin}},[t._v("登录")]),e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"login",class:{show:t.isShowLogin}},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:t.login.username},on:{input:function(e){e.target.composing||t.$set(t.login,"username",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.login.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onLogin.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}})]),e("p",{class:{error:t.login.isError}},[t._v(" "+t._s(t.login.notice))]),e("div",{staticClass:"button",on:{click:t.onLogin}},[t._v(" 登录")])])])],1)])])])])},et=[],ot={data(){return{isShowLogin:!0,isShowRegister:!1,login:{username:"",password:"",notice:"输入用户名和密码~",isError:!1},register:{username:"",password:"",notice:"创建账号后，请记住用户名和密码",isError:!1}}},methods:{...Object(u["b"])({loginUser:"login",registerUser:"register",checkLogin:"checkLogin"}),showLogin(){this.isShowLogin=!0,this.isShowRegister=!1},showRegister(){this.isShowLogin=!1,this.isShowRegister=!0},onRegister(){return/^[\w\u4e00-\u9fa5]{3,15}$/.test(this.register.username)?/^.{6,16}$/.test(this.register.password)?void this.registerUser({username:this.register.username,password:this.register.password}).then(()=>{this.register.isError=!1,this.register.notice="",this.$router.push({path:"/notebooks"})}).catch(t=>{this.register.isError=!0,this.register.notice=t.msg}):(this.register.isError=!0,void(this.register.notice="密码长度为6~16个字符")):(this.register.isError=!0,void(this.register.notice="用户名3~15个字符，仅限于字母数字下划线中文"))},onLogin(){return/^[\w\u4e00-\u9fa5]{3,15}$/.test(this.login.username)?/^.{6,16}$/.test(this.login.password)?void this.loginUser({username:this.login.username,password:this.login.password}).then(()=>{this.login.isError=!1,this.login.notice="",this.$router.push({path:"/notebooks"})}).catch(t=>{this.login.isError=!0,this.login.notice=t.msg}):(this.login.isError=!0,void(this.login.notice="密码长度为6~16个字符")):(this.login.isError=!0,void(this.login.notice="用户名3~15个字符，仅限于字母数字下划线中文"))}}},st=ot,nt=(o("a284"),Object(p["a"])(st,tt,et,!1,null,null,null)),rt=nt.exports,at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail",attrs:{id:"notebook-list"}},[e("header",[e("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onCreate.apply(null,arguments)}}},[e("img",{staticClass:"iconfont icon-plus",attrs:{alt:"",src:o("eef4")}}),e("span",{staticClass:"iconText"},[t._v("新建笔记本")])])]),e("main",[e("div",{staticClass:"layout"},[e("h3",[t._v("笔记本列表, 共"+t._s(t.notebooks.length))]),e("div",{staticClass:"book-list"},t._l(t.notebooks,(function(o){return e("router-link",{key:o.id,staticClass:"notebook",attrs:{to:"/note?notebookId="+o.id}},[e("div",[e("span",{staticClass:"iconfont icon-notebook"},[t._v(t._s(o.title))]),e("span",[t._v(t._s(o.noteCounts))]),e("span",{staticClass:"action",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onEdit(o)}}},[t._v("编辑")]),e("span",{staticClass:"action",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onDelete(o)}}},[t._v("删除")]),e("span",{staticClass:"date"},[t._v(t._s(o.createdAtFriendly))])])])})),1)])])])},it=[],dt={name:"NotebookList",created(){this.checkLogin({path:"/login"}),this.getNotebooks()},computed:{...Object(u["c"])(["notebooks"])},methods:{...Object(u["b"])(["getNotebooks","addNotebook","updateNotebook","deleteNotebook","checkLogin"]),onCreate(){this.$prompt("请输入新的笔记本标题","创建笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,30}$/,inputErrorMessage:"标题不能为空，且长度不能超过30字符"}).then(({value:t})=>{this.addNotebook({title:t})})},onEdit(t){this.$prompt("请输入新的笔记本标题","修改笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,30}$/,inputErrorMessage:"标题不能为空，且长度不能超过30字符",inputValue:t.title}).then(({value:e})=>{this.updateNotebook({notebookId:t.id,title:e})})},onDelete(t){this.$confirm("确认删除该笔记本, 是否继续?","删除该笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.deleteNotebook({notebookId:t.id})})}}},ct=dt,ut=(o("581e"),Object(p["a"])(ct,at,it,!1,null,"68a14b5f",null)),lt=ut.exports,ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail",attrs:{id:"note"}},[e("note-side-bar",{on:{"update:updateNotes":e=>t.notes=e}}),e("div",{staticClass:"note-detail"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.curNote.id,expression:"!curNote.id"}],staticClass:"note-empty"},[t._v("请选择你查看的笔记")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.curNote.id,expression:"curNote.id"}]},[e("div",{staticClass:"note-bar"},[e("span",[t._v(" 创建日期: "+t._s(t.curNote.createdAtFriendly))]),e("span",[t._v(" 更新日期: "+t._s(t.curNote.updatedAtFriendly))]),e("span",[t._v(t._s(t.statusText))]),e("span",{on:{click:t.onDeleteNote}},[e("img",{attrs:{src:o("d739"),alt:""}})]),e("span",{on:{click:function(e){t.isShow=!t.isShow}}},[e("img",{attrs:{src:o("ed29"),alt:""}})])]),e("div",{staticClass:"note-title"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.curNote.title,expression:"curNote.title"}],attrs:{type:"text",placeholder:"输入标题"},domProps:{value:t.curNote.title},on:{input:[function(e){e.target.composing||t.$set(t.curNote,"title",e.target.value)},t.onUpdateNote],keydown:function(e){t.statusText="正在输入......"}}})])]),e("div",{staticClass:"editor"},[e("label",[e("textarea",{directives:[{name:"show",rawName:"v-show",value:!this.isShow,expression:"!this.isShow"},{name:"model",rawName:"v-model",value:t.curNote.content,expression:"curNote.content"}],attrs:{placeholder:"输入内容，支持 Markdown 语法"},domProps:{value:t.curNote.content},on:{input:[function(e){e.target.composing||t.$set(t.curNote,"content",e.target.value)},t.onUpdateNote],inputread:function(e){t.statusText="正在输入......"}}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"this.isShow"}],staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.previewContent)}},[t._v("预览页面")])])])])],1)},pt=[],mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"note-sidebar"},[e("span",{staticClass:"btn add-note",on:{click:t.onAddNote}},[t._v("添加笔记")]),e("el-dropdown",{staticClass:"notebook-title",attrs:{trigger:"click",placement:"bottom"},on:{command:t.handleCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.curBook.title)+" "),e("i",{staticClass:"iconfont icon-down"})]),e("el-dropdown-menu",{staticClass:"el-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.notebooks.slice(0,15),(function(o){return e("el-dropdown-item",{key:o.id,attrs:{command:o.id}},[t._v(" "+t._s(o.title)+" ")])})),e("el-dropdown-item",{attrs:{command:"trash"}},[t._v("回收站")])],2)],1),t._m(0),e("ul",{staticClass:"notes"},t._l(t.notes,(function(o){return e("li",{key:o.id},[e("router-link",{attrs:{to:`/note?noteId=${o.id}&notebookId=${t.curBook.id}`}},[e("span",{staticClass:"date"},[t._v(t._s(o.updatedAtFriendly))]),e("span",{staticClass:"title"},[t._v(t._s(o.title))])])],1)})),0)],1)},gt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu"},[e("div",[t._v("更新时间")]),e("div",[t._v("标题")])])}],vt={name:"NoteSideBar",data(){return{}},created(){this.getNotebooks().then(()=>(this.setCurBook({curBookId:this.$route.query.notebookId}),this.getNotes({notebookId:this.curBook.id}))).then(()=>{this.setCurNote({curNoteId:this.$route.query.noteId}),this.$router.replace({path:"/note",query:{noteId:this.curNote.id,notebookId:this.curBook.id}})})},computed:{...Object(u["c"])(["notebooks","notes","curBook","curNote"])},methods:{...Object(u["d"])(["setCurBook","setCurNote"]),...Object(u["b"])(["getNotebooks","getNotes","addNote"]),handleCommand(t){if("trash"===t)return this.$router.push({path:"/trash"});this.$store.commit("setCurBook",{curBookId:t}),this.getNotes({notebookId:t}).then(()=>{this.setCurNote({}),this.$router.replace({path:"/note",query:{noteId:this.curNote.id,notebookId:this.curBook.id}})})},onAddNote(){this.addNote({notebookId:this.curBook.id})}}},bt=vt,ft=(o("37c5"),Object(p["a"])(bt,mt,gt,!1,null,"bf85cc9e",null)),Nt=ft.exports,kt=o("2ef0"),wt=o.n(kt),Tt=o("d4cd"),It=o.n(Tt);let _t=new It.a;var Ct={name:"NoteDetail",components:{NoteSideBar:Nt},data(){return{statusText:"笔记未更新",isShow:!1}},created(){this.checkLogin({path:"/login"})},beforeRouteUpdate(t){this.setCurNote({curNoteId:t.query.noteId})},methods:{...Object(u["d"])(["setCurNote"]),...Object(u["b"])(["updateNote","deleteNote","checkLogin"]),onUpdateNote:wt.a.debounce((function(){this.curNote.id&&this.updateNote({noteId:this.curNote.id,title:this.curNote.title,content:this.curNote.content}).then(()=>{this.statusText="已更新"}).catch(()=>{this.statusText="保存出错"})}),3e3),onDeleteNote(){this.deleteNote({noteId:this.curNote.id}).then(()=>{this.$router.replace({path:"/note"})})}},computed:{...Object(u["c"])(["notes","curNote"]),previewContent(){return _t.render(this.curNote.content||"")}}},yt=Ct,Et=(o("6c89"),Object(p["a"])(yt,ht,pt,!1,null,"d7526958",null)),At=Et.exports,xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail",attrs:{id:"trash"}},[e("div",{staticClass:"note-sidebar"},[e("h3",{staticClass:"notebook-title"},[t._v("回收站")]),t._m(0),e("ul",{staticClass:"trashNotes"},t._l(t.trashNotes,(function(o){return e("li",{key:o.id},[e("router-link",{attrs:{to:"/trash?noteId="+o.id}},[e("span",{staticClass:"date"},[t._v(t._s(o.updatedAtFriendly))]),e("span",{staticClass:"title"},[t._v(t._s(o.title))])])],1)})),0)]),e("div",{staticClass:"note-detail"},[e("div",{staticClass:"note-bar"},[e("span",[t._v("创建日期："+t._s(t.curTrashNote.createdAtFriendly))]),e("span",[t._v(" | ")]),e("span",[t._v("更新日期："+t._s(t.curTrashNote.updatedAtFriendly))]),e("span",[t._v(" | ")]),e("span",[t._v("所属笔记本:"+t._s(t.belongTo))]),e("a",{staticClass:"btn action",on:{click:t.onRevert}},[t._v("恢复")]),e("a",{staticClass:"btn action",on:{click:t.onDelete}},[t._v("彻底删除")])]),e("div",{staticClass:"note-title"},[e("span",[t._v("笔记标题:"+t._s(t.curTrashNote.title))])]),e("div",{staticClass:"editor"},[e("div",{staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.compileMarkdown)}})])])])},Ot=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu"},[e("div",[t._v("更新时间")]),e("div",[t._v("标题")])])}];let Lt=new It.a;var Pt={name:"TrashDetail",beforeRouteUpdate(t){this.setCurTrashNote({curTrashNoteId:t.query.noteId})},created(){this.checkLogin({path:"/login"}),this.getNotebooks(),this.getAllTrashNotes().then(()=>{this.setCurTrashNote("noteId:",{curTrashNoteId:this.$route.query.noteId}),this.$router.replace({path:"/trash",query:{noteId:this.curTrashNote.id}})})},computed:{...Object(u["c"])(["trashNotes","curTrashNote","belongTo"]),compileMarkdown(){return Lt.render(this.curTrashNote.content||"")}},methods:{...Object(u["b"])(["checkLogin","getAllTrashNotes","removeTrashNote","revertTrashNote","getNotebooks"]),...Object(u["d"])(["setCurTrashNote"]),onDelete(){this.$confirm("删除笔记后，无法恢复, 是否继续?","删除该笔记本",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>this.removeTrashNote({noteId:this.curTrashNote.id})).then(()=>{this.setCurTrashNote(),this.$router.replace({path:"/trash",query:{noteId:this.curTrashNote.id}})})},onRevert(){this.revertTrashNote({noteId:this.curTrashNote.id}).then(()=>{this.setCurTrashNote(),this.$router.replace({path:"/trash",query:{noteId:this.curTrashNote.id}})})}}},St=Pt,Dt=(o("32ce"),Object(p["a"])(St,xt,Ot,!1,null,"7a75a1f8",null)),jt=Dt.exports;s["default"].use(_["a"]);const $t=new _["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:rt},{path:"/notebooks",name:"NotebookList",component:lt},{path:"/note",name:"note",component:At},{path:"/trash",name:"trash",component:jt}]});var Bt=$t;s["default"].use(u["a"]);const Mt={user:null},Rt={username:t=>null===t.user?"未登录":t.user.username,slug:t=>null===t.user?"未":t.user.username.charAt(0)},Ut={setUser(t,e){t.user=e.user}},Ft={login({commit:t},{username:e,password:o}){return Z.login({username:e,password:o}).then(e=>{t("setUser",{user:e.data})})},register({commit:t},{username:e,password:o}){return Z.register({username:e,password:o}).then(e=>{t("setUser",{user:e.data})})},checkLogin({commit:t,state:e},o){return null!==e.user?Promise.resolve():Z.getInfo().then(e=>{e.isLogin?t("setUser",{user:e.data}):Bt.push(o)})},logout({commit:t},e={path:"/login"}){return Z.logout().then(()=>{t("setUser",{user:null}),Bt.push(e)})}};var Gt={state:Mt,getters:Rt,mutations:Ut,actions:Ft};s["default"].use(u["a"]);var qt=new u["a"].Store({modules:{notebook:B,note:H,trash:X,user:Gt}});o("0fae");s["default"].use(u["a"]),s["default"].config.productionTip=!1,s["default"].use(_["a"]),s["default"].use(A.a),new s["default"]({render:t=>t(I),router:Bt,store:qt,beforeCreate(){s["default"].prototype.$bus=this}}).$mount("#app")},"581e":function(t,e,o){"use strict";o("de66")},"5a72":function(t,e,o){},"6c89":function(t,e,o){"use strict";o("b074")},"6e4d":function(t,e,o){t.exports=o.p+"img/note.78661b34.svg"},9134:function(t,e,o){"use strict";o("f73a")},"932e":function(t,e,o){},a284:function(t,e,o){"use strict";o("ae35")},ae35:function(t,e,o){},b074:function(t,e,o){},c3f6:function(t,e,o){},c637:function(t,e,o){t.exports=o.p+"img/trash.68b76f56.svg"},d739:function(t,e,o){t.exports=o.p+"img/delete.d352d9a0.svg"},de66:function(t,e,o){},ed29:function(t,e,o){t.exports=o.p+"img/eyes.b793b505.svg"},eef4:function(t,e,o){t.exports=o.p+"img/add.efcdd0c7.svg"},f027:function(t,e,o){t.exports=o.p+"img/notebook.6599b2aa.svg"},f73a:function(t,e,o){}});
//# sourceMappingURL=app.7986089f.js.map